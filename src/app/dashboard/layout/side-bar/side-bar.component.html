<mat-sidenav-container class="sidenav-container">
    
    <mat-sidenav #drawer mode="side" [opened]="isSidebarOpen">
        <mat-accordion>
            <ng-container *ngFor="let item of menu">
                <!-- If item has children -->
                <mat-expansion-panel class="mat-elevation-z0" *ngIf="hasChildren(item)" [expanded]="[item.expanded]">
                    <mat-expansion-panel-header>
                        <mat-panel-title>
                            <mat-icon class="sidebar-menuIton">{{ item.icon }}</mat-icon>
                        </mat-panel-title>
                        <mat-panel-description>
                            {{ item.label }}
                        </mat-panel-description>
                    </mat-expansion-panel-header>
                    <!-- Nested submenu -->
                    <ng-container *ngIf="item.children">
                        <div *ngFor="let child of item.children">
                            <div class="standalone-item" *ngIf="!hasChildren(child)">
                                <a [routerLink]="[child.route]">
                                    <mat-icon class="sidebar-menuIton">{{ child.icon }}</mat-icon>
                                    <div class="description" style="transform: translateY(-1px);padding: 0 0 0 30px;">
                                        <div class="text">{{ child.label }}</div>
                                    </div>
                                </a>
                            </div>
                            <mat-expansion-panel class="mat-elevation-z0" *ngIf="hasChildren(child)">
                                <mat-expansion-panel-header>
                                    <mat-panel-title>
                                        <mat-icon class="sidebar-menuIton">{{ child.icon }}</mat-icon>
                                    </mat-panel-title>
                                    <mat-panel-description>
                                        {{ child.label }}
                                    </mat-panel-description>
                                </mat-expansion-panel-header>
                                <div class="list">
                                    <div class="standalone-item" *ngFor="let nested of child.children"
                                        style="padding: 0 12px">
                                        <a [routerLink]="[nested.route]">
                                            <mat-icon>{{ nested.icon }}</mat-icon>
                                            <div class="description" style="padding: 0 0 0 5px;">
                                                <span class="text">{{ nested.label }}</span>
                                            </div>
                                        </a>
                                    </div>
                                </div>
                            </mat-expansion-panel>
                        </div>
                    </ng-container>
                </mat-expansion-panel>

                <!-- If item has no children -->
                <div class="standalone-item" *ngIf="!hasChildren(item)">
                    <a [routerLink]="[item.route]">
                        <mat-icon>{{ item.icon }}</mat-icon>
                        <div class="description">
                            <span class="text">{{ item.label }}</span>
                        </div>
                    </a>
                </div>
            </ng-container>
        </mat-accordion>
    </mat-sidenav>

    <mat-sidenav-content>
        <app-main-content></app-main-content>
    </mat-sidenav-content>

</mat-sidenav-container>

